# APIコールを行うためにリソースプリンシパルを使用する

## 概要

リソースプリンシパルを使用して、APIコールを行います。

## 使用法

```
singularity storage create oos resource_principal_auth [コマンドオプション] [引数...]
```

## 説明

- `--namespace`：
オブジェクトストレージの名前空間

- `--compartment`：
オブジェクトストレージのコンパートメントOCID

- `--region`：
オブジェクトストレージのリージョン

- `--endpoint`：
オブジェクトストレージAPIのエンドポイント。
リージョンのデフォルトエンドポイントを使用する場合は、空白のままにします。

- `--storage-tier`：
ストレージに新しいオブジェクトを保存する際に使用するストレージクラス。詳細はこちらを参照してください：[ストレージクラスの理解](https://docs.oracle.com/en-us/iaas/Content/Object/Concepts/understandingstoragetiers.htm)

    例：
    - Standard：標準のストレージクラス（デフォルトのクラス）
    - InfrequentAccess：頻繁にアクセスしないストレージクラス
    - Archive：アーカイブストレージクラス

- `--upload-cutoff`：
チャンク化アップロードに切り替えるためのファイルのカットオフサイズ。

    このサイズを超えるファイルは、chunk_sizeごとにチャンク化されてアップロードされます。
    最小値は0、最大値は5 GiBです。

- `--chunk-size`：
アップロード時に使用するチャンクサイズ。

    upload_cutoffを超えるファイルや、サイズの不明なファイル（たとえば「rclone rcat」からのファイルや「rclone mount」やGoogleフォトやGoogleドキュメントでアップロードされたファイル）は、このチャンクサイズを使用してマルチパートアップロードされます。

    デフォルトのチャンクサイズは5 MiBであり、1つの転送ごとにメモリには「upload_concurrency」のチャンクがバッファされます。

    高速リンクで大きなファイルを転送しており、十分なメモリがある場合は、これを増やすことで転送速度が向上します。

    Rcloneは、10,000のチャンク制限を下回るように、既知のサイズの大きなファイルをアップロードするときにチャンクサイズを自動的に増やします。

    サイズが不明なファイルは、設定されたchunk_sizeでアップロードされます。デフォルトのチャンクサイズが5 MiBであり、最大で10,000のチャンクがあるため、デフォルトではストリームアップロードできるファイルの最大サイズは48 GiBです。さらに大きなファイルをストリームアップロードする場合は、chunk_sizeを増やす必要があります。

    チャンクサイズを増やすと、「-P」フラグで表示される進捗状況の正確性が低下します。

- `--upload-concurrency`：
マルチパートアップロードの同時実行数。

    同じファイルの複数のチャンクが同時にアップロードされます。

    少数のファイルを高速リンクでアップロードし、これらのアップロードが帯域幅を十分に利用していない場合は、これを増やすと転送速度が高まる可能性があります。

- `--copy-cutoff`：
マルチパートコピーに切り替えるためのファイルのカットオフサイズ。

    サーバーサイドでコピーする必要があるこのサイズを超えるファイルは、このサイズのチャンクでコピーされます。

    最小値は0、最大値は5 GiBです。

- `--copy-timeout`：
コピーのタイムアウト。

    コピーは非同期操作です。コピーが成功するまで待機するためのタイムアウトを指定します。

- `--disable-checksum`：
オブジェクトのメタデータにMD5チェックサムを保存しない。

    通常、rcloneはアップロード前に入力のMD5チェックサムを計算し、オブジェクトのメタデータに追加することがあります。これにより、データの整合性チェックが行われますが、大きなファイルのアップロードは開始までに長時間かかる場合があります。

- `--encoding`：
バックエンドのエンコーディング。

    詳細は[概要のエンコーディングセクション](/overview/#encoding)を参照してください。

- `--leave-parts-on-error`：
失敗時にアップロードの中止を回避し、すべての正常にアップロードされたパーツを手動で回復できるようにする場合は true。

    異なるセッション間でのアップロードの再開にはtrueに設定する必要があります。

    警告：不完全なマルチパートアップロードのパーツを保存すると、オブジェクトストレージのスペース使用量にカウントされ、クリーンアップされない場合に追加のコストがかかります。

- `--no-check-bucket`：
バケットの存在チェックや作成を試行しない場合に設定します。

    バケットが既に存在する場合は、rcloneが実行するトランザクションの数を最小限に抑えるために役立つ場合があります。

    また、使用するユーザにバケット作成権限がない場合にも必要です。

- `--sse-customer-key-file`：
SSE-Cを使用する場合、オブジェクトに関連付けられたAES-256暗号化キーのBase64符号化文字列を含むファイル。

    例：
    - <未設定>：なし

- `--sse-customer-key`：
SSE-Cを使用するためのオプションヘッダで、データの暗号化または復号化に使用する、Base64でエンコードされた256ビットの暗号化キーを指定します。

    例：
    - <未設定>：なし

- `--sse-customer-key-sha256`：
SSE-Cを使用する場合、暗号化キーのBase64エンコードされたSHA256ハッシュを指定するオプションヘッダ。

    この値は、暗号化キーの整合性チェックに使用されます。

    詳細は[サーバーサイド暗号化に自分のキーを使用する](https://docs.cloud.oracle.com/Content/Object/Tasks/usingyourencryptionkeys.htm)を参照してください。

    例：
    - <未設定>：なし

- `--sse-kms-key-id`：
ヴォールトで独自のマスターキーを使用している場合、このヘッダでマスター暗号化キーのOCIDを指定します。

    詳細は[識別子の使用](https://docs.cloud.oracle.com/Content/General/Concepts/identifiers.htm)を参照してください。

    例：
    - <未設定>：なし

- `--sse-customer-algorithm`：
SSE-Cを使用する場合、暗号化アルゴリズムとして「AES256」を指定するオプションヘッダ。

    オブジェクトストレージは「AES256」を暗号化アルゴリズムとしてサポートしています。

    詳細は[サーバーサイド暗号化に自分のキーを使用する](https://docs.cloud.oracle.com/Content/Object/Tasks/usingyourencryptionkeys.htm)を参照してください。

    例：
   - <未設定>：なし
   - AES256：AES256

## オプション

### General

- `--name`：
ストレージの名前（デフォルト：自動生成）

- `--path`：
ストレージのパス

#### Advanced

- `--compartment`：
オブジェクトストレージのコンパートメントOCID

- `--endpoint`：
オブジェクトストレージAPIのエンドポイント

- `--help, -h`：
ヘルプを表示

- `--namespace`：
オブジェクトストレージの名前空間

- `--region`：
オブジェクトストレージのリージョン

- `--chunk-size`：
アップロード時に使用するチャンクサイズ（デフォルト：「5Mi」）

- `--copy-cutoff`：
マルチパートコピーに切り替えるためのファイルのカットオフサイズ（デフォルト：「4.656Gi」）

- `--copy-timeout`：
コピーのタイムアウト（デフォルト：「1m0s」）

- `--disable-checksum`：
オブジェクトのメタデータにMD5チェックサムを保存しない（デフォルト：false）

- `--encoding`：
バックエンドのエンコーディング（デフォルト：「Slash,InvalidUtf8,Dot」）

- `--leave-parts-on-error`：
失敗時にアップロードの中止を回避し、正常にアップロードされたパーツをS3に残す場合はtrue（デフォルト：false）

- `--no-check-bucket`：
バケットの存在チェックや作成を試行しない場合はtrue（デフォルト：false）

- `--sse-customer-algorithm`：
SSE-Cを使用する場合、暗号化アルゴリズムとして「AES256」を指定するオプションヘッダ

- `--sse-customer-key`：
SSE-Cを使用する場合、データの暗号化または復号化に使用する、Base64でエンコードされた256ビットの暗号化キーを指定するオプションヘッダ

- `--sse-customer-key-file`：
SSE-Cを使用する場合、オブジェクトに関連付けられたAES-256暗号化キーのBase64符号化文字列を含むファイル

- `--sse-customer-key-sha256`：
SSE-Cを使用する場合、暗号化キーのBase64エンコードされたSHA256ハッシュを指定するオプションヘッダ

- `--sse-kms-key-id`：
ヴォールトで独自のマスターキーを使用している場合、マスター暗号化キーのOCIDを指定するヘッダ

- `--storage-tier`：
ストレージに新しいオブジェクトを保存する際に使用するストレージクラス（デフォルト：「Standard」）

- `--upload-concurrency`：
マルチパートアップロードの同時実行数（デフォルト：10）

- `--upload-cutoff`：
チャンク化アップロードに切り替えるためのファイルのカットオフサイズ（デフォルト：「200Mi」）