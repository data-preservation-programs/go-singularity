user@localhost:~/test$ singularity --verbose storage create local source '/tempDir/0'
ID  Name    CreatedAt            UpdatedAt            Type   Path                                                             Config              
1   source  2023-04-05 06:07:08  2023-04-05 06:07:08  local  /tempDir/0  encoding:Slash,Dot  

user@localhost:~/test$ singularity --verbose prep create --delete-after-export --max-size 3MB --source source --local-output '/tempDir/1' --local-output '/tempDir/2'
ID  CreatedAt            UpdatedAt            DeleteAfterExport  MaxSize  PieceSize  
1   2023-04-05 06:07:08  2023-04-05 06:07:08  true               3000000  4194304    
    Source Storages:
        ID  Name    CreatedAt            UpdatedAt            Type   Path                                                             Config              
        1   source  2023-04-05 06:07:08  2023-04-05 06:07:08  local  /tempDir/0  encoding:Slash,Dot  
    Output Storages:
        ID  Name      CreatedAt            UpdatedAt            Type   Path                                                             Config              
        2   002-7b1a  2023-04-05 06:07:08  2023-04-05 06:07:08  local  /tempDir/1  encoding:Slash,Dot  
        3   003-cee9  2023-04-05 06:07:08  2023-04-05 06:07:08  local  /tempDir/2  encoding:Slash,Dot  

user@localhost:~/test$ singularity --verbose prep start-scan 1 source
ID  Type  State  ErrorMessage  ErrorStackTrace  WorkerID  AttachmentID  
1   scan  ready                                 <nil>     1             

user@localhost:~/test$ singularity --verbose run dataset-worker --exit-on-complete=true --exit-on-error=true

user@localhost:~/test$ singularity --verbose prep list-pieces 1
AttachmentID  SourceStorageID  
1             1                
    SourceStorage
        ID  Name    CreatedAt            UpdatedAt            Type   Path                                                             Config              
        1   source  2023-04-05 06:07:08  2023-04-05 06:07:08  local  /tempDir/0  encoding:Slash,Dot  
    Pieces
        ID  CreatedAt            PieceCID                                                          PieceSize  RootCID                                                      FileSize  StorageID  StoragePath                                                           
        1   2023-04-05 06:07:08  baga6ea4seaqg6ufdf3fup7si3whhwstcp6cdhexwsufat3myubt4hh6m4twe6ei  4194304    bafkreihdwdcefgh4dqkjv67uzcmw7ojee6xedzdetojuzjevtenxquvyku  2097364   2          baga6ea4seaqg6ufdf3fup7si3whhwstcp6cdhexwsufat3myubt4hh6m4twe6ei.car  
        2   2023-04-05 06:07:08  baga6ea4seaqnaai6mlam6am6677rglje7logcgsgoch2kqoy3okuntatie4gafi  4194304    bafkreiclhifaqnsggjx5qjewvosii5dhb5tutwc4gho2suqhnets65trpi  2097289   3          baga6ea4seaqnaai6mlam6am6677rglje7logcgsgoch2kqoy3okuntatie4gafi.car  
        3   2023-04-05 06:07:08  baga6ea4seaqpkj3ocmlqlx3j7seuqipnuh7i3mi7nnydbsrjhvk35dx53wzsimi  4194304    bafkreiecoihw6nalhhhdxyzvlsmnlrymjqqjrxuix5avu4ed4t3dqtxue4  2097289   3          baga6ea4seaqpkj3ocmlqlx3j7seuqipnuh7i3mi7nnydbsrjhvk35dx53wzsimi.car  
        4   2023-04-05 06:07:08  baga6ea4seaqjum4agaomdkx5masv6vih6eo7njlls7fg4xqlj4h2ib6fjdux4ai  4194304    bafkreifgisaxqu3ndc3vbxyhmcuinuuhk7cpm4rv5ybmcltuufjlqlb54m  2097289   2          baga6ea4seaqjum4agaomdkx5masv6vih6eo7njlls7fg4xqlj4h2ib6fjdux4ai.car  
        5   2023-04-05 06:07:08  baga6ea4seaqovr3tkf6kfzxhtnfajso6zuu4ncer6kjwqibzg5qb224gvchzwni  4194304    bafkreih4tg7ucqaco7bgyotjdedwe6qd6wkyjwhut2abl3jal6liscxjti  2097289   2          baga6ea4seaqovr3tkf6kfzxhtnfajso6zuu4ncer6kjwqibzg5qb224gvchzwni.car  
        6   2023-04-05 06:07:08  baga6ea4seaqa2rw3okyogkrwfvwyw7bbp3nfxcmntq3pdn4id7epwh366t7zgkq  4194304    bafkreiati6zicuyqkmmd6yxmt2yo4hmauj6tcqcjgz3pdiavqorppda5aq  2097289   3          baga6ea4seaqa2rw3okyogkrwfvwyw7bbp3nfxcmntq3pdn4id7epwh366t7zgkq.car  
        7   2023-04-05 06:07:08  baga6ea4seaqnaai6mlam6am6677rglje7logcgsgoch2kqoy3okuntatie4gafi  4194304    bafkreiclhifaqnsggjx5qjewvosii5dhb5tutwc4gho2suqhnets65trpi  2097289   3          baga6ea4seaqnaai6mlam6am6677rglje7logcgsgoch2kqoy3okuntatie4gafi.car  
        8   2023-04-05 06:07:08  baga6ea4seaqpkj3ocmlqlx3j7seuqipnuh7i3mi7nnydbsrjhvk35dx53wzsimi  4194304    bafkreiecoihw6nalhhhdxyzvlsmnlrymjqqjrxuix5avu4ed4t3dqtxue4  2097289   2          baga6ea4seaqpkj3ocmlqlx3j7seuqipnuh7i3mi7nnydbsrjhvk35dx53wzsimi.car  
        9   2023-04-05 06:07:08  baga6ea4seaqjum4agaomdkx5masv6vih6eo7njlls7fg4xqlj4h2ib6fjdux4ai  4194304    bafkreifgisaxqu3ndc3vbxyhmcuinuuhk7cpm4rv5ybmcltuufjlqlb54m  2097289   3          baga6ea4seaqjum4agaomdkx5masv6vih6eo7njlls7fg4xqlj4h2ib6fjdux4ai.car  
        10  2023-04-05 06:07:08  baga6ea4seaqovr3tkf6kfzxhtnfajso6zuu4ncer6kjwqibzg5qb224gvchzwni  4194304    bafkreih4tg7ucqaco7bgyotjdedwe6qd6wkyjwhut2abl3jal6liscxjti  2097289   3          baga6ea4seaqovr3tkf6kfzxhtnfajso6zuu4ncer6kjwqibzg5qb224gvchzwni.car  
        11  2023-04-05 06:07:08  baga6ea4seaqlw23tb2fubfonzvrzdphihwmf4p74jsumv7c3y5frgeon6fq4moi  4194304    bafkreiati6zicuyqkmmd6yxmt2yo4hmauj6tcqcjgz3pdiavqorppda5aq  2097289   2          baga6ea4seaqlw23tb2fubfonzvrzdphihwmf4p74jsumv7c3y5frgeon6fq4moi.car  
        12  2023-04-05 06:07:08  baga6ea4seaqdznrhjndcdmw3egjk7u7o5nzaez4bnzavuk5y5sf6fkvjwdxeaai  4194304    bafkreicpcgm7e7eef7yxeh7z3b5torlifcrngoekgoueynirtsihkhstdu  2097289   2          baga6ea4seaqdznrhjndcdmw3egjk7u7o5nzaez4bnzavuk5y5sf6fkvjwdxeaai.car  
        13  2023-04-05 06:07:08  baga6ea4seaqpge557in3422bvqnw2kn2uqupd2y2wvrtbfcf4z7m2g2rvvbgeby  4194304    bafkreibnoxumhzvc2ggd7z533645nmdvpxmneqzgceerph7qw3ayxqisgq  2097289   3          baga6ea4seaqpge557in3422bvqnw2kn2uqupd2y2wvrtbfcf4z7m2g2rvvbgeby.car  
        14  2023-04-05 06:07:08  baga6ea4seaqg5ylh2753wub7dyy75vhgtxpu5g2sbcnn3yaaajadcarfdz5pcmq  4194304    bafkreia5hn2uqmtqitb2fpnaqxpsbcuhrno4esjw3q5sveka7xaxnrekei  2097289   3          baga6ea4seaqg5ylh2753wub7dyy75vhgtxpu5g2sbcnn3yaaajadcarfdz5pcmq.car  
        15  2023-04-05 06:07:08  baga6ea4seaqlked46lkjxwbsd2penpb7e55xtz636qvxwyuukhpcmpegwf7vcha  4194304    bafkreiagh4fnrg2qlljzfl367eu7pouopfumty4qgmi2zyjluv7fwebqui  2097289   2          baga6ea4seaqlked46lkjxwbsd2penpb7e55xtz636qvxwyuukhpcmpegwf7vcha.car  
        16  2023-04-05 06:07:08  baga6ea4seaqhnh45bjnxlg6o47xmbs5cchyq2en33tf2gwu5kgsno6oviasz6ey  4194304    bafkreif75qbf2ihtt3ezno3z4c2p73q5bktdaji5xtrxjpo36yxtkskxoq  2097289   2          baga6ea4seaqhnh45bjnxlg6o47xmbs5cchyq2en33tf2gwu5kgsno6oviasz6ey.car  
        17  2023-04-05 06:07:08  baga6ea4seaqp6mlpktezki75a7ydgspcnh7qymwmhcfmkvt5k5simhc6zx7q6ii  4194304    bafkreihojlawjknqg6aq6tb5uicyaqrv776am7x7hifxphvvrljergyojm  2097289   3          baga6ea4seaqp6mlpktezki75a7ydgspcnh7qymwmhcfmkvt5k5simhc6zx7q6ii.car  
        18  2023-04-05 06:07:08  baga6ea4seaqngtbtbui5duf5vxvolvyjnk73obs6ihcx4qnobqnbxeyfj3afecy  4194304    bafkreihva2iov4q5i7p37bdlklwxy7wkxra6wu5p3knda3vxdjpgkvppx4  2097289   3          baga6ea4seaqngtbtbui5duf5vxvolvyjnk73obs6ihcx4qnobqnbxeyfj3afecy.car  
        19  2023-04-05 06:07:08  baga6ea4seaqnlooqtmlkdgv2jjzrydbjn3xp6oid4cikriiucu55wt3l5x6m6di  4194304    bafkreichqeyaeg74dx7gkacm3wjqt5e5esfywygs3axuhcfglqvgdjwghq  2097289   2          baga6ea4seaqnlooqtmlkdgv2jjzrydbjn3xp6oid4cikriiucu55wt3l5x6m6di.car  
        20  2023-04-05 06:07:08  baga6ea4seaqpozs25zp3edkpy7mctd4qcc7wl5hytzwwigwtqweo7dqfsaquapy  4194304    bafkreidoxgbn72d7hrtw6biv2ktuegzxlq6ulat6vibngomec56cjkgkn4  2097289   3          baga6ea4seaqpozs25zp3edkpy7mctd4qcc7wl5hytzwwigwtqweo7dqfsaquapy.car  
        21  2023-04-05 06:07:08  baga6ea4seaqeriiyx3mgnc5hbkikvyqmtddxzs66i2xukro2acc3gaaxnwcikni  4194304    bafkreidew6hz5ot7pc7fysxpzk774eielxw6wakrurmy466rql7rz6fjme  1048674   2          baga6ea4seaqeriiyx3mgnc5hbkikvyqmtddxzs66i2xukro2acc3gaaxnwcikni.car  

