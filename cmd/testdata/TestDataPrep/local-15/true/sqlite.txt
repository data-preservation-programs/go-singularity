user@localhost:~/test$ singularity storage create local  source '/tempDir/0'
ID  Name    Type   Path                             
1   source  local  /tempDir/0  

user@localhost:~/test$ singularity prep create --max-size 15728640 --source source
ID  DeleteAfterExport  MaxSize   PieceSize  
1   false              15728640  16777216   
    Source Storages:
        ID  Name    Type   Path                             
        1   source  local  /tempDir/0  

user@localhost:~/test$ singularity prep list
ID  DeleteAfterExport  MaxSize   PieceSize  
1   false              15728640  16777216   
    Source Storages:
        ID  Name    Type   Path                             
        1   source  local  /tempDir/0  

user@localhost:~/test$ singularity prep start-scan 1 source
ID  Type  State  ErrorMessage  WorkerID  
1   scan  ready                <nil>     

user@localhost:~/test$ singularity run dataset-worker --exit-on-complete=true --exit-on-error=true

user@localhost:~/test$ singularity prep status 1
AttachmentID  SourceStorageID  
1             1                
    SourceStorage
        ID  Name    Type   Path                             
        1   source  local  /tempDir/0  
    Jobs
        ID  Type  State     ErrorMessage  WorkerID  
        1   scan  complete                <nil>     
        2   pack  complete                <nil>     
        3   pack  complete                <nil>     

user@localhost:~/test$ singularity prep list-pieces 1
AttachmentID  SourceStorageID  
1             1                
    SourceStorage
        ID  Name    Type   Path                             
        1   source  local  /tempDir/0  
    Pieces
        PieceCID                                                          PieceSize  RootCID                                                      FileSize  StoragePath  
        baga6ea4seaqgu2z476lsdeipuhtg7yjbxbojyvd6dmcwiqzj7mew7g7nawrtiny  16777216   bafkreihdwdcefgh4dqkjv67uzcmw7ojee6xedzdetojuzjevtenxquvyku  14681665               
        baga6ea4seaqcrfdwlspeusi6u6wbgebucz3gghig5bnttq7s7pplhxnpi3wvkji  16777216   bafkreih5q44fjjf7vj46exxepvfuoy5yjduv6qrusbunnmiuyrtqduahqy  8399169                

user@localhost:~/test$ singularity prep explore 1 source
Path  CID                                                          
      bafybeigrzpcn2xi4wmsbowmltinlf2fycniyssae5xjm6s4x5ukinrjy74  
    SubEntries
        Path                IsDir  CID                                                          
        /smallfiles         true   bafybeigokrdx4f2arks3rwq47a2nk2h64klfulput3ceahqi57qbe4qgrm  
        /subfolder          true   bafybeihlfc6wcdg5ioryewuky25gsnzgqbkay576eeefbz2q5j53twfqqe  
        /size-1048577.txt   false  bafybeihyoyn2hzzamyuv67jray2iqrrtp74thkf45mlzon5m5gmgbity5y  
        /size-20971520.txt  false  bafybeibu7yp54dzg33g5y6lx36oq4wsjwtah5heklczdsir2pw6scd74nu  
        /size-0.txt         false  bafkreihdwdcefgh4dqkjv67uzcmw7ojee6xedzdetojuzjevtenxquvyku  
        /size-1.txt         false  bafkreigks6arfsq3xxfpvqrrwonchxcnu6do76auprhhfomao6c273sixm  
        /size-1048576.txt   false  bafkreialma7cnmrp643lmxzcnnwqpxuu3kaywazbotsbvparlpixxkuolu  

user@localhost:~/test$ singularity prep explore 1 source subfolder
Path       CID                                                          
subfolder  bafybeihlfc6wcdg5ioryewuky25gsnzgqbkay576eeefbz2q5j53twfqqe  
    SubEntries
        Path                IsDir  CID                                                          
        subfolder/folder-0  true   bafybeigs5l2cvtc44rzygg6citduv6lcbzb6eteuopnqld7r5u442htrsq  

user@localhost:~/test$ singularity prep start-daggen 1 source
ID  Type    State  ErrorMessage  WorkerID  
4   daggen  ready                <nil>     

user@localhost:~/test$ singularity run dataset-worker --exit-on-complete=true --exit-on-error=true

user@localhost:~/test$ singularity prep status 1
AttachmentID  SourceStorageID  
1             1                
    SourceStorage
        ID  Name    Type   Path                             
        1   source  local  /tempDir/0  
    Jobs
        ID  Type    State     ErrorMessage  WorkerID  
        1   scan    complete                <nil>     
        2   pack    complete                <nil>     
        3   pack    complete                <nil>     
        4   daggen  complete                <nil>     

user@localhost:~/test$ singularity prep list-pieces 1
AttachmentID  SourceStorageID  
1             1                
    SourceStorage
        ID  Name    Type   Path                             
        1   source  local  /tempDir/0  
    Pieces
        PieceCID                                                          PieceSize  RootCID                                                      FileSize  StoragePath  
        baga6ea4seaqgu2z476lsdeipuhtg7yjbxbojyvd6dmcwiqzj7mew7g7nawrtiny  16777216   bafkreihdwdcefgh4dqkjv67uzcmw7ojee6xedzdetojuzjevtenxquvyku  14681665               
        baga6ea4seaqcrfdwlspeusi6u6wbgebucz3gghig5bnttq7s7pplhxnpi3wvkji  16777216   bafkreih5q44fjjf7vj46exxepvfuoy5yjduv6qrusbunnmiuyrtqduahqy  8399169                
        baga6ea4seaqg5jluqb5wxj6t3gkrnyhxcmbrlsj5pomrfezc2akm5zfoah5uiaa  16777216   bafybeigrzpcn2xi4wmsbowmltinlf2fycniyssae5xjm6s4x5ukinrjy74  9101                   

user@localhost:~/test$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqcrfdwlspeusi6u6wbgebucz3gghig5bnttq7s7pplhxnpi3wvkji

user@localhost:~/test$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqg5jluqb5wxj6t3gkrnyhxcmbrlsj5pomrfezc2akm5zfoah5uiaa

user@localhost:~/test$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqgu2z476lsdeipuhtg7yjbxbojyvd6dmcwiqzj7mew7g7nawrtiny

user@localhost:~/test$ singularity extract-car -i '/tempDir/2' -o '/tempDir/4' -c bafybeigrzpcn2xi4wmsbowmltinlf2fycniyssae5xjm6s4x5ukinrjy74
Create Dir /tempDir/4
Writing to /tempDir/4/size-0.txt
Writing to /tempDir/4/size-1.txt
Writing to /tempDir/4/size-1048576.txt
Writing to /tempDir/4/size-1048577.txt
Writing to /tempDir/4/size-20971520.txt
Create Dir /tempDir/4/smallfiles
Writing to /tempDir/4/smallfiles/file-87.txt
Writing to /tempDir/4/smallfiles/file-49.txt
Writing to /tempDir/4/smallfiles/file-23.txt
Writing to /tempDir/4/smallfiles/file-36.txt
Writing to /tempDir/4/smallfiles/file-14.txt
Writing to /tempDir/4/smallfiles/file-25.txt
Writing to /tempDir/4/smallfiles/file-65.txt
Writing to /tempDir/4/smallfiles/file-89.txt
Writing to /tempDir/4/smallfiles/file-2.txt
Writing to /tempDir/4/smallfiles/file-11.txt
Writing to /tempDir/4/smallfiles/file-59.txt
Writing to /tempDir/4/smallfiles/file-22.txt
Writing to /tempDir/4/smallfiles/file-95.txt
Writing to /tempDir/4/smallfiles/file-51.txt
Writing to /tempDir/4/smallfiles/file-7.txt
Writing to /tempDir/4/smallfiles/file-72.txt
Writing to /tempDir/4/smallfiles/file-82.txt
Writing to /tempDir/4/smallfiles/file-68.txt
Writing to /tempDir/4/smallfiles/file-20.txt
Writing to /tempDir/4/smallfiles/file-53.txt
Writing to /tempDir/4/smallfiles/file-67.txt
Writing to /tempDir/4/smallfiles/file-91.txt
Writing to /tempDir/4/smallfiles/file-88.txt
Writing to /tempDir/4/smallfiles/file-56.txt
Writing to /tempDir/4/smallfiles/file-15.txt
Writing to /tempDir/4/smallfiles/file-92.txt
Writing to /tempDir/4/smallfiles/file-99.txt
Writing to /tempDir/4/smallfiles/file-34.txt
Writing to /tempDir/4/smallfiles/file-16.txt
Writing to /tempDir/4/smallfiles/file-97.txt
Writing to /tempDir/4/smallfiles/file-78.txt
Writing to /tempDir/4/smallfiles/file-57.txt
Writing to /tempDir/4/smallfiles/file-70.txt
Writing to /tempDir/4/smallfiles/file-39.txt
Writing to /tempDir/4/smallfiles/file-45.txt
Writing to /tempDir/4/smallfiles/file-40.txt
Writing to /tempDir/4/smallfiles/file-31.txt
Writing to /tempDir/4/smallfiles/file-30.txt
Writing to /tempDir/4/smallfiles/file-94.txt
Writing to /tempDir/4/smallfiles/file-38.txt
Writing to /tempDir/4/smallfiles/file-13.txt
Writing to /tempDir/4/smallfiles/file-75.txt
Writing to /tempDir/4/smallfiles/file-79.txt
Writing to /tempDir/4/smallfiles/file-81.txt
Writing to /tempDir/4/smallfiles/file-37.txt
Writing to /tempDir/4/smallfiles/file-71.txt
Writing to /tempDir/4/smallfiles/file-33.txt
Writing to /tempDir/4/smallfiles/file-54.txt
Writing to /tempDir/4/smallfiles/file-35.txt
Writing to /tempDir/4/smallfiles/file-86.txt
Writing to /tempDir/4/smallfiles/file-3.txt
Writing to /tempDir/4/smallfiles/file-12.txt
Writing to /tempDir/4/smallfiles/file-73.txt
Writing to /tempDir/4/smallfiles/file-24.txt
Writing to /tempDir/4/smallfiles/file-9.txt
Writing to /tempDir/4/smallfiles/file-83.txt
Writing to /tempDir/4/smallfiles/file-96.txt
Writing to /tempDir/4/smallfiles/file-28.txt
Writing to /tempDir/4/smallfiles/file-50.txt
Writing to /tempDir/4/smallfiles/file-46.txt
Writing to /tempDir/4/smallfiles/file-93.txt
Writing to /tempDir/4/smallfiles/file-66.txt
Writing to /tempDir/4/smallfiles/file-6.txt
Writing to /tempDir/4/smallfiles/file-4.txt
Writing to /tempDir/4/smallfiles/file-76.txt
Writing to /tempDir/4/smallfiles/file-80.txt
Writing to /tempDir/4/smallfiles/file-27.txt
Writing to /tempDir/4/smallfiles/file-44.txt
Writing to /tempDir/4/smallfiles/file-48.txt
Writing to /tempDir/4/smallfiles/file-61.txt
Writing to /tempDir/4/smallfiles/file-63.txt
Writing to /tempDir/4/smallfiles/file-5.txt
Writing to /tempDir/4/smallfiles/file-69.txt
Writing to /tempDir/4/smallfiles/file-52.txt
Writing to /tempDir/4/smallfiles/file-42.txt
Writing to /tempDir/4/smallfiles/file-55.txt
Writing to /tempDir/4/smallfiles/file-1.txt
Writing to /tempDir/4/smallfiles/file-60.txt
Writing to /tempDir/4/smallfiles/file-21.txt
Writing to /tempDir/4/smallfiles/file-98.txt
Writing to /tempDir/4/smallfiles/file-47.txt
Writing to /tempDir/4/smallfiles/file-32.txt
Writing to /tempDir/4/smallfiles/file-8.txt
Writing to /tempDir/4/smallfiles/file-77.txt
Writing to /tempDir/4/smallfiles/file-90.txt
Writing to /tempDir/4/smallfiles/file-26.txt
Writing to /tempDir/4/smallfiles/file-0.txt
Writing to /tempDir/4/smallfiles/file-19.txt
Writing to /tempDir/4/smallfiles/file-74.txt
Writing to /tempDir/4/smallfiles/file-58.txt
Writing to /tempDir/4/smallfiles/file-41.txt
Writing to /tempDir/4/smallfiles/file-62.txt
Writing to /tempDir/4/smallfiles/file-18.txt
Writing to /tempDir/4/smallfiles/file-29.txt
Writing to /tempDir/4/smallfiles/file-84.txt
Writing to /tempDir/4/smallfiles/file-85.txt
Writing to /tempDir/4/smallfiles/file-17.txt
Writing to /tempDir/4/smallfiles/file-43.txt
Writing to /tempDir/4/smallfiles/file-10.txt
Writing to /tempDir/4/smallfiles/file-64.txt
Create Dir /tempDir/4/subfolder
Create Dir /tempDir/4/subfolder/folder-0
Create Dir /tempDir/4/subfolder/folder-0/folder-1
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4/folder-5
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4/folder-5/folder-6
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4/folder-5/folder-6/folder-7
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4/folder-5/folder-6/folder-7/folder-8
Create Dir /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4/folder-5/folder-6/folder-7/folder-8/folder-9
Writing to /tempDir/4/subfolder/folder-0/folder-1/folder-2/folder-3/folder-4/folder-5/folder-6/folder-7/folder-8/folder-9/file.txt

