[32muser@localhost[0m:[34m~/test[0m$ singularity storage create s3 aws --region us-west-2 source 'public-dataset-test'
[32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
[33m1   [0msource  s3    public-dataset-test  

[32muser@localhost[0m:[34m~/test[0m$ singularity storage create local output '/tempDir/1'
[32;4mID  [0m[32;4mName    [0m[32;4mType   [0m[32;4mPath                                                 [0m
[33m2   [0moutput  local  /tempDir/1  

[32muser@localhost[0m:[34m~/test[0m$ singularity prep create --max-size 3145728 --source source --output output
[32;4mID  [0m[32;4mDeleteAfterExport  [0m[32;4mMaxSize  [0m[32;4mPieceSize  [0m
[33m1   [0mfalse              3145728  4194304    
    [32;4mSource Storages:[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
        [33m1   [0msource  s3    public-dataset-test  
    [32;4mOutput Storages:[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType   [0m[32;4mPath                                                 [0m
        [33m2   [0moutput  local  /tempDir/1  

[32muser@localhost[0m:[34m~/test[0m$ singularity prep list
[32;4mID  [0m[32;4mDeleteAfterExport  [0m[32;4mMaxSize  [0m[32;4mPieceSize  [0m
[33m1   [0mfalse              3145728  4194304    
    [32;4mSource Storages:[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
        [33m1   [0msource  s3    public-dataset-test  
    [32;4mOutput Storages:[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType   [0m[32;4mPath                                                 [0m
        [33m2   [0moutput  local  /tempDir/1  

[32muser@localhost[0m:[34m~/test[0m$ singularity prep start-scan 1 source
[32;4mID  [0m[32;4mType  [0m[32;4mState  [0m[32;4mErrorMessage  [0m[32;4mWorkerID  [0m
[33m1   [0mscan  ready                <nil>     

[32muser@localhost[0m:[34m~/test[0m$ singularity run dataset-worker --exit-on-complete=true --exit-on-error=true

[32muser@localhost[0m:[34m~/test[0m$ singularity prep status 1
[32;4mAttachmentID  [0m[32;4mSourceStorageID  [0m
[33m1             [0m1                
    [32;4mSourceStorage[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
        [33m1   [0msource  s3    public-dataset-test  
    [32;4mJobs[0m
        [32;4mID  [0m[32;4mType  [0m[32;4mState     [0m[32;4mErrorMessage  [0m[32;4mWorkerID  [0m
        [33m1   [0mscan  complete                <nil>     
        [33m2   [0mpack  complete                <nil>     
        [33m3   [0mpack  complete                <nil>     
        [33m4   [0mpack  complete                <nil>     
        [33m5   [0mpack  complete                <nil>     
        [33m6   [0mpack  complete                <nil>     
        [33m7   [0mpack  complete                <nil>     
        [33m8   [0mpack  complete                <nil>     
        [33m9   [0mpack  complete                <nil>     

[32muser@localhost[0m:[34m~/test[0m$ singularity prep list-pieces 1
[32;4mAttachmentID  [0m[32;4mSourceStorageID  [0m
[33m1             [0m1                
    [32;4mSourceStorage[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
        [33m1   [0msource  s3    public-dataset-test  
    [32;4mPieces[0m
        [32;4mPieceCID                                                          [0m[32;4mPieceSize  [0m[32;4mRootCID                                                      [0m[32;4mFileSize  [0m[32;4mStoragePath                                                           [0m
        [33mbaga6ea4seaqh3smsr7bshdrsdrdfgjurzbsavfhbx4d64aylwx4c2zaowv23shi  [0m4194304    bafkreihapgghmthdtobwrxswcf4j5whyb2qcqkglus5t3n7vyiu2tmnlj4  2097289   baga6ea4seaqh3smsr7bshdrsdrdfgjurzbsavfhbx4d64aylwx4c2zaowv23shi.car  
        [33mbaga6ea4seaqjkjjoo74igel5gtasefidspjph5w7ekbul7hzgn4ytkiqezjs6ja  [0m4194304    bafkreibfqcqumxxoink3qzyq3mrlps2ubrajybvfdzpnsaxgepipe2witi  2097289   baga6ea4seaqjkjjoo74igel5gtasefidspjph5w7ekbul7hzgn4ytkiqezjs6ja.car  
        [33mbaga6ea4seaqpq35cx7vorecvr76khfqgnt6jweyccwayvlp6dnaxiseai4scseq  [0m4194304    bafkreiaq7ophpn6zcmwwvjdd5o2ox5yw57ypi7pklxvsuvmsuzrfbxgcg4  2097289   baga6ea4seaqpq35cx7vorecvr76khfqgnt6jweyccwayvlp6dnaxiseai4scseq.car  
        [33mbaga6ea4seaqpy36djo7fwwbapfkj6dshtlwgyumnspmxeo74xthbbfmscqkkgjy  [0m4194304    bafkreigyvfppwx4wdecurtuyhdwzpkgpc6y7gxj2toxi2czgd6mc3a5uvy  2097289   baga6ea4seaqpy36djo7fwwbapfkj6dshtlwgyumnspmxeo74xthbbfmscqkkgjy.car  
        [33mbaga6ea4seaqgl2apiunor5mfwpllqgypbvnubp6wvlbx6nqcglxb2ga6nu4r2di  [0m4194304    bafkreih35kwmk4jdxg3zcul4fxh3vdq5ncbrxr3mns4dlmfcj2jy54rgle  2097289   baga6ea4seaqgl2apiunor5mfwpllqgypbvnubp6wvlbx6nqcglxb2ga6nu4r2di.car  
        [33mbaga6ea4seaqmfj5z5zxhozcigx5dn5fq3vzx7yngw5faz6eym7xpovpiaqgqioi  [0m4194304    bafkreidwsqhkfbpzcwocicej2bllnlcmr4gl56heri5bddstklnogvxhpy  2097289   baga6ea4seaqmfj5z5zxhozcigx5dn5fq3vzx7yngw5faz6eym7xpovpiaqgqioi.car  
        [33mbaga6ea4seaql5gewvtn3zbtdr4c6qvpzmamtthw7effk33tu5ke2btp4o6vgcly  [0m4194304    bafkreigsrbwz5vhprefbvefx47w3zltm6cinfcmtfe2fyamrcajwwfmukm  2097289   baga6ea4seaql5gewvtn3zbtdr4c6qvpzmamtthw7effk33tu5ke2btp4o6vgcly.car  
        [33mbaga6ea4seaqi5hggfbi5cj4knaqpudflxvhmzs5nuqvidqrhpo52cxajvbrxcja  [0m4194304    bafkreiexktrqyjiadhbpkmqjnc2dthophlemwsoab6tpmvdul4y26g63si  2098351   baga6ea4seaqi5hggfbi5cj4knaqpudflxvhmzs5nuqvidqrhpo52cxajvbrxcja.car  

[32muser@localhost[0m:[34m~/test[0m$ singularity prep explore 1 source
[32;4mPath  [0m[32;4mCID                                                          [0m
[33m      [0mbafybeiapv7qgtdb2ndvtljzhpxwcbehgu5qb3qzxtw7shonfxex3l5jkmi  
    [32;4mSubEntries[0m
        [32;4mPath        [0m[32;4mIsDir  [0m[32;4mCID                                                          [0m
        [33m/subfolder  [0mtrue   bafybeigw35n64es7z2gz3brhxugz6ldbctk7pnjxbfcywusgdfwrhrfjcu  

[32muser@localhost[0m:[34m~/test[0m$ singularity prep explore 1 source subfolder
[32;4mPath       [0m[32;4mCID                                                          [0m
[33msubfolder  [0mbafybeigw35n64es7z2gz3brhxugz6ldbctk7pnjxbfcywusgdfwrhrfjcu  
    [32;4mSubEntries[0m
        [32;4mPath                            [0m[32;4mIsDir  [0m[32;4mCID                                                          [0m
        [33msubfolder/subfolder/1m.random   [0mfalse  bafkreiexcs4yzyufix7tfsvol3g7tbklgncoobqe2rx54cdvurliwzmgni  
        [33msubfolder/subfolder/15M.random  [0mfalse  bafybeibhl5wjdjhbzid43jdyrpkn5gfwijbwrp7aspd23kpej6c5qlz3lq  
        [33msubfolder/subfolder/1k.random   [0mfalse  bafkreicsy5b3uywswfbejr2ednvngzjwftgg5yfl64by3plhcrzxqyr7zq  

[32muser@localhost[0m:[34m~/test[0m$ singularity prep start-daggen 1 source
[32;4mID  [0m[32;4mType    [0m[32;4mState  [0m[32;4mErrorMessage  [0m[32;4mWorkerID  [0m
[33m10  [0mdaggen  ready                <nil>     

[32muser@localhost[0m:[34m~/test[0m$ singularity run dataset-worker --exit-on-complete=true --exit-on-error=true

[32muser@localhost[0m:[34m~/test[0m$ singularity prep status 1
[32;4mAttachmentID  [0m[32;4mSourceStorageID  [0m
[33m1             [0m1                
    [32;4mSourceStorage[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
        [33m1   [0msource  s3    public-dataset-test  
    [32;4mJobs[0m
        [32;4mID  [0m[32;4mType    [0m[32;4mState     [0m[32;4mErrorMessage  [0m[32;4mWorkerID  [0m
        [33m1   [0mscan    complete                <nil>     
        [33m2   [0mpack    complete                <nil>     
        [33m3   [0mpack    complete                <nil>     
        [33m4   [0mpack    complete                <nil>     
        [33m5   [0mpack    complete                <nil>     
        [33m6   [0mpack    complete                <nil>     
        [33m7   [0mpack    complete                <nil>     
        [33m8   [0mpack    complete                <nil>     
        [33m9   [0mpack    complete                <nil>     
        [33m10  [0mdaggen  complete                <nil>     

[32muser@localhost[0m:[34m~/test[0m$ singularity prep list-pieces 1
[32;4mAttachmentID  [0m[32;4mSourceStorageID  [0m
[33m1             [0m1                
    [32;4mSourceStorage[0m
        [32;4mID  [0m[32;4mName    [0m[32;4mType  [0m[32;4mPath                 [0m
        [33m1   [0msource  s3    public-dataset-test  
    [32;4mPieces[0m
        [32;4mPieceCID                                                          [0m[32;4mPieceSize  [0m[32;4mRootCID                                                      [0m[32;4mFileSize  [0m[32;4mStoragePath                                                           [0m
        [33mbaga6ea4seaqh3smsr7bshdrsdrdfgjurzbsavfhbx4d64aylwx4c2zaowv23shi  [0m4194304    bafkreihapgghmthdtobwrxswcf4j5whyb2qcqkglus5t3n7vyiu2tmnlj4  2097289   baga6ea4seaqh3smsr7bshdrsdrdfgjurzbsavfhbx4d64aylwx4c2zaowv23shi.car  
        [33mbaga6ea4seaqjkjjoo74igel5gtasefidspjph5w7ekbul7hzgn4ytkiqezjs6ja  [0m4194304    bafkreibfqcqumxxoink3qzyq3mrlps2ubrajybvfdzpnsaxgepipe2witi  2097289   baga6ea4seaqjkjjoo74igel5gtasefidspjph5w7ekbul7hzgn4ytkiqezjs6ja.car  
        [33mbaga6ea4seaqpq35cx7vorecvr76khfqgnt6jweyccwayvlp6dnaxiseai4scseq  [0m4194304    bafkreiaq7ophpn6zcmwwvjdd5o2ox5yw57ypi7pklxvsuvmsuzrfbxgcg4  2097289   baga6ea4seaqpq35cx7vorecvr76khfqgnt6jweyccwayvlp6dnaxiseai4scseq.car  
        [33mbaga6ea4seaqpy36djo7fwwbapfkj6dshtlwgyumnspmxeo74xthbbfmscqkkgjy  [0m4194304    bafkreigyvfppwx4wdecurtuyhdwzpkgpc6y7gxj2toxi2czgd6mc3a5uvy  2097289   baga6ea4seaqpy36djo7fwwbapfkj6dshtlwgyumnspmxeo74xthbbfmscqkkgjy.car  
        [33mbaga6ea4seaqgl2apiunor5mfwpllqgypbvnubp6wvlbx6nqcglxb2ga6nu4r2di  [0m4194304    bafkreih35kwmk4jdxg3zcul4fxh3vdq5ncbrxr3mns4dlmfcj2jy54rgle  2097289   baga6ea4seaqgl2apiunor5mfwpllqgypbvnubp6wvlbx6nqcglxb2ga6nu4r2di.car  
        [33mbaga6ea4seaqmfj5z5zxhozcigx5dn5fq3vzx7yngw5faz6eym7xpovpiaqgqioi  [0m4194304    bafkreidwsqhkfbpzcwocicej2bllnlcmr4gl56heri5bddstklnogvxhpy  2097289   baga6ea4seaqmfj5z5zxhozcigx5dn5fq3vzx7yngw5faz6eym7xpovpiaqgqioi.car  
        [33mbaga6ea4seaql5gewvtn3zbtdr4c6qvpzmamtthw7effk33tu5ke2btp4o6vgcly  [0m4194304    bafkreigsrbwz5vhprefbvefx47w3zltm6cinfcmtfe2fyamrcajwwfmukm  2097289   baga6ea4seaql5gewvtn3zbtdr4c6qvpzmamtthw7effk33tu5ke2btp4o6vgcly.car  
        [33mbaga6ea4seaqi5hggfbi5cj4knaqpudflxvhmzs5nuqvidqrhpo52cxajvbrxcja  [0m4194304    bafkreiexktrqyjiadhbpkmqjnc2dthophlemwsoab6tpmvdul4y26g63si  2098351   baga6ea4seaqi5hggfbi5cj4knaqpudflxvhmzs5nuqvidqrhpo52cxajvbrxcja.car  
        [33mbaga6ea4seaqmw3pr5nhmabok6yawrb45mgue6gmwsvwsab35inja3gq72yiu4ci  [0m4194304    bafybeiapv7qgtdb2ndvtljzhpxwcbehgu5qb3qzxtw7shonfxex3l5jkmi  1161      baga6ea4seaqmw3pr5nhmabok6yawrb45mgue6gmwsvwsab35inja3gq72yiu4ci.car  

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqgl2apiunor5mfwpllqgypbvnubp6wvlbx6nqcglxb2ga6nu4r2di

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqh3smsr7bshdrsdrdfgjurzbsavfhbx4d64aylwx4c2zaowv23shi

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqi5hggfbi5cj4knaqpudflxvhmzs5nuqvidqrhpo52cxajvbrxcja

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqjkjjoo74igel5gtasefidspjph5w7ekbul7hzgn4ytkiqezjs6ja

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaql5gewvtn3zbtdr4c6qvpzmamtthw7effk33tu5ke2btp4o6vgcly

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqmfj5z5zxhozcigx5dn5fq3vzx7yngw5faz6eym7xpovpiaqgqioi

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqmw3pr5nhmabok6yawrb45mgue6gmwsvwsab35inja3gq72yiu4ci

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqpq35cx7vorecvr76khfqgnt6jweyccwayvlp6dnaxiseai4scseq

[32muser@localhost[0m:[34m~/test[0m$ singularity download  --quiet --api http://127.0.0.1:7778 --out-dir '/tempDir/3' baga6ea4seaqpy36djo7fwwbapfkj6dshtlwgyumnspmxeo74xthbbfmscqkkgjy

[32muser@localhost[0m:[34m~/test[0m$ singularity extract-car -i '/tempDir/2' -o '/tempDir/4' -c bafybeiapv7qgtdb2ndvtljzhpxwcbehgu5qb3qzxtw7shonfxex3l5jkmi
Create Dir /tempDir/4
Create Dir /tempDir/4/subfolder
Writing to /tempDir/4/subfolder/15M.random
Writing to /tempDir/4/subfolder/1k.random
Writing to /tempDir/4/subfolder/1m.random

